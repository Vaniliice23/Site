# Портал квитанций зарплаты

Веб-приложение для поиска и скачивания квитанций зарплаты из Google Таблиц.

## Возможности

- Поиск квитанций по имени и фамилии сотрудника
- Просмотр квитанций в браузере
- Скачивание квитанций в формате PDF
- Скачивание квитанций в формате изображения (PNG)
- Адаптивный дизайн для мобильных устройств
- Точное форматирование квитанций по эталонному образцу

## Требования

- Python 3.8 или выше
- Доступ к Google Таблицам с данными квитанций
- Учетные данные сервисного аккаунта Google (credentials.json)

## Установка

1. Клонируйте репозиторий или распакуйте архив:

```bash
git clone https://github.com/yourusername/payslip-portal.git
cd payslip-portal
```

2. Активируйте виртуальное окружение:

```bash
source venv/bin/activate  # для Linux/Mac
# или
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:

```bash
pip install -r requirements.txt
```

4. Настройте переменные окружения:

Создайте файл `.env` в корневой директории проекта со следующим содержимым:

```
SPREADSHEET_ID=ваш_идентификатор_google_таблицы
SECRET_KEY=секретный_ключ_для_flask
```

5. Поместите файл учетных данных сервисного аккаунта Google (`credentials.json`) в директорию `src/`:

```bash
cp /путь/к/credentials.json src/credentials.json
```

## Запуск

### Локальный запуск для разработки

```bash
python src/main.py
```

Приложение будет доступно по адресу: http://localhost:5000

### Запуск на сервере

```bash
gunicorn -w 4 -b 0.0.0.0:8000 "src.main:create_app()"
```

Приложение будет доступно по адресу: http://ваш_сервер:8000

### Запуск на локальном компьютере как сервер

```bash
python src/main.py
```

Приложение будет доступно по адресу: http://ваш_локальный_ip:5000

Чтобы узнать ваш локальный IP-адрес:
- Windows: `ipconfig` в командной строке
- Linux/Mac: `ifconfig` или `ip addr` в терминале

## Настройка доступа к Google Таблицам

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект
3. Включите Google Sheets API
4. Создайте сервисный аккаунт
5. Создайте ключ для сервисного аккаунта в формате JSON
6. Скачайте файл ключа и переименуйте его в `credentials.json`
7. Поместите файл `credentials.json` в директорию `src/`
8. Предоставьте доступ к вашей Google Таблице для email-адреса сервисного аккаунта

## Структура Google Таблицы

Приложение ожидает следующую структуру Google Таблицы:

1. Лист "Контакты" с информацией о сотрудниках:
   - Столбец с именами сотрудников
   - Столбец с email-адресами (опционально)
   - Столбец с номерами телефонов (опционально)

2. Лист "Квитанции (Ив-2)" с данными квитанций:
   - Блоки данных для каждого сотрудника
   - Каждый блок содержит имя сотрудника, период, начисления и удержания

## Безопасность

- Приложение использует только чтение данных из Google Таблиц
- Доступ к квитанциям осуществляется только по точному совпадению имени и фамилии
- Для продакшн-окружения рекомендуется настроить HTTPS
- Не используйте стандартный секретный ключ в продакшн-окружении

## Обновление данных

Данные квитанций обновляются автоматически при каждом запросе, так как приложение напрямую обращается к Google Таблицам.

## Поддержка и обратная связь

При возникновении проблем или вопросов, пожалуйста, создайте issue в репозитории или свяжитесь с разработчиком.
